<!DOCTYPE html>
<html>
    <head>
        <title>Regex and primes</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <script src="http://cloud.github.com/downloads/gnab/remark/remark-0.3.4.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script src="http://cloud.github.com/downloads/kjbekkelund/remark-bekk/bekk-0.0.3.js" type="text/javascript"></script>
        <link href="http://cloud.github.com/downloads/kjbekkelund/remark-bekk/bekk-0.0.3.css" type="text/css" rel="stylesheet"/>
        <style>
            #slideshow .slide .content.front-page {
                background-image: none;
            }
            #slideshow .slide .content.pushed .img {
                background-color: white;
            }
            #slideshow .slide .content.scale-height .img {
                position: absolute;
                top: 2em;
                right: 2em;
                bottom: 2em;
                left: 2em;
                overflow: hidden;   
            }
        </style>
    </head>
    <body>
        <textarea id="source">

.front-page
# Regex light(ning talk)

---

.agenda
# Fun with regex

* Understanding regex in 2 minutes
* Some basics
* Finding primes
* Treat if there's still time

---

# Regular Expressions

Strings describing a search pattern

Wildcards on steruids

---

# Some basics

`abc` literally searches for `abc`

`1+1=2` vs `1\+1=2`

`[]` Denotes a character class. `gr[ae]y` matches both `grey` and `gray`

`^` and `$` are anchors, matching start and end of string respectively

`|` (pipe) is used for alteration. `grey|gray` would also match both

`*` and `+` are used for repetition

`?` means two things; maybe or lazy

`()` are used to capture groups

`\<number>` are backreferences

---

# Examples

File extensions? 

`*.txt` vs `.*\.txt$`

Emails? 

`????` vs `\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b`

---

# Finding primes

How can regex find primes? Regex has no control structure?

Not only is this false, every engine needs some form of structure!

Regex actually has implementations for control structure

---

# Finding primes

How can regex find primes? Regex has no control structure?

Not only is this false, every engine needs some form of structure!

Regex actually has implementations for control structure



.c
    def is_regex(number):
        regex = re.compile("^1?$|^(11+?)\\1+$")
        unary = "1" * int(number)
        return True if regex.match(unary) else False

---

# Finding primes

How can regex find primes? Regex has no control structure?

Not only is this false, every engine needs some form of structure!

Regex actually has implementations for control structure



.c
    def is_regex(number):
        regex = re.compile("^1?$|^(11+?)\\1+$")
        unary = "1" * int(number)
        return True if regex.match(unary) else False

Regex engine is sequential

Searches until a match is found or all variations are exhausted

---

# Treat

What does this do?



.c
    ^(?!(00|30-02))(((?=.+(?!00)([02468](?=[048](00)?$)|[13579](?=[26](00)?$)))|
    (?!29-02))[012]\d|30|31(?!-(0[2469]|11)))-(0[1-9]|1[012])-\d{4}$

---

# Treat

What does this do?



.c
    ^(?!(00|30-02))(((?=.+(?!00)([02468](?=[048](00)?$)|[13579](?=[26](00)?$)))|
    (?!29-02))[012]\d|30|31(?!-(0[2469]|11)))-(0[1-9]|1[012])-\d{4}$

Same as this one!



.c 
    ^(?!00)((([0-2][0-9]|3[0-1])-(0[13578]|1[02])|([0-2][0-9]|30)-(0[469]|11)|
    [0-1][0-9]|2[0-8]-02)-[0-9]{4}|([0-1][0-9]|2[0-9])-02-
    (([02468][048]|[13579][26])(?=00)|[0-9]{2}(?!00))([02468][048]|[13579][26]))$

---

# Treat

What does this do?



.c
    ^(?!(00|30-02))(((?=.+(?!00)([02468](?=[048](00)?$)|[13579](?=[26](00)?$)))|
    (?!29-02))[012]\d|30|31(?!-(0[2469]|11)))-(0[1-9]|1[012])-\d{4}$

Same as this one!



.c 
    ^(?!00)((([0-2][0-9]|3[0-1])-(0[13578]|1[02])|([0-2][0-9]|30)-(0[469]|11)|
    [0-1][0-9]|2[0-8]-02)-[0-9]{4}|([0-1][0-9]|2[0-9])-02-
    (([02468][048]|[13579][26])(?=00)|[0-9]{2}(?!00))([02468][048]|[13579][26]))$


Validates dates in the `dd-mm-yyyy` format

Does it work? How fast is it?

https://gist.github.com/tellnes/3d0392db04d335fcbbfd

---

.middle.center
# Thanks

        </textarea>
        <div id="slideshow"></div>
    </body>
</html>
